<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

<h:head>
    <meta charset="UTF-8" />
    <title>TEMU LOGIN</title>

    <!-- Icono -->
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/5520/5520840.png" />

    <!-- Estilos y librerías externas -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet' />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/material-icons@1.13.12/iconfont/material-icons.min.css" />
    <link href="css/stylelogin.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
</h:head>

<!-- data-theme viene del bean -->
<h:body pt:data-theme="#{loginbean.theme}">
<section>
  <div class="container">
    <div class="row full-screen align-items-center">
      <div class="left">
        <span class="line"></span>
        <h2>TEMU LOGIN</h2>

        <!-- Botón de cambio de tema -->
        <h:form id="themeForm">
          <!-- Campo con el valor del tema actualizado por el servidor -->
          <h:inputHidden id="currentTheme" value="#{loginbean.theme}" />

          <p:commandLink styleClass="btn-theme"
               process="@this"
               update="themeIcon themeForm:currentTheme"
               actionListener="#{loginbean.toggleTheme}"
               oncomplete="applyThemeByInputId('themeForm:currentTheme')">
  <h:panelGroup id="themeIcon" layout="block">
    <i class="material-icons" aria-hidden="true">#{loginbean.themeIcon}</i>
  </h:panelGroup>
</p:commandLink>

        </h:form>
      </div>

      <div class="right">
        <!-- Encabezado y switch fuera de los forms -->
        <h6><span>Log In</span> <span id="h6color">Sign Up</span></h6>
        <input type="checkbox" class="checkbox" id="reg-log" />
        <label for="reg-log"></label>

        <div class="card-3d-wrap">
          <div class="card-3d-wrapper">

            <!-- FRONT: LOGIN -->
            <div class="card-front">
              <div class="center-wrap">
                <h:form id="formLogin">
                  <p:messages id="messagesLogin" autoUpdate="true" />
                  <h4 class="heading">Log In</h4>

                  <div class="form-group">
                    <h:inputText placeholder="Correo"
                                 value="#{loginbean.correo}"
                                 styleClass="form-style"
                                 autocomplete="off" />
                  </div>

                  <div class="form-group">
                    <h:inputSecret placeholder="Contraseña"
                                   value="#{loginbean.contrasena}"
                                   styleClass="form-style"
                                   autocomplete="off" />
                  </div>

                  <p:commandButton value="Submit"
                                   styleClass="btn"
                                   action="#{loginbean.iniciar}"
                                   ajax="false" />
                  <p class="text-center">
                    <a href="#" class="link">Forgot your password?</a>
                  </p>
                </h:form>
              </div>
            </div>

            <!-- BACK: SIGN UP -->
            <div class="card-back">
              <div class="center-wrap">
                <h:form id="formSignup">
                  <p:messages id="messagesSignup" autoUpdate="true" />
                  <h4 class="heading">Sign Up</h4>

                  <div class="form-group">
                    <h:inputText placeholder="Nombre"
                                 value="#{loginbean.nombre}"
                                 styleClass="form-style"
                                 autocomplete="off" />
                  </div>

                  <div class="form-group">
                    <h:inputText placeholder="Correo"
                                 value="#{loginbean.correoC}"
                                 styleClass="form-style"
                                 autocomplete="off" />
                  </div>

                  <div class="form-group">
                    <h:inputSecret placeholder="Contraseña"
                                   value="#{loginbean.contrasenaC}"
                                   styleClass="form-style"
                                   autocomplete="off" />
                  </div>

                  <div class="form-group">
                    <h:inputSecret placeholder="Confirmar Contraseña"
                                   value="#{loginbean.confiContrasenaC}"
                                   styleClass="form-style"
                                   autocomplete="off" />
                  </div>

                  <!-- ajax=false para navegación completa -->
                  <p:commandButton value="Registrarse"
                                   styleClass="btn"
                                   action="#{loginbean.crear}"
                                   ajax="false" />
                  <p class="text-center">
                    <a href="#" class="nav-link active-link">¿Ya tienes cuenta? Inicia sesión</a>
                  </p>
                </h:form>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>
  </div>
</section>


<h:outputScript target="body">#{loginbean.applyThemeScript}</h:outputScript>

</h:body>
</html>
